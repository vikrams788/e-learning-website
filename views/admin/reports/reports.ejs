<%- include('../../header') %>

<div class="container">
  <h2>Analytics Dashboard</h2>

  <table class="table" id="analyticsTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Page Views</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data will be populated dynamically using JavaScript -->
    </tbody>
  </table>
</div>

<footer class="bg-dark text-white text-center py-3 footer">
  Made with ❤️ by Vikram Singh &copy; 2023
</footer>

<script>
  fetch('/api/analytics/page-views')
    .then(response => response.json())
    .then(data => {
      const tableBody = document.querySelector('#analyticsTable tbody');

      data.forEach(entry => {
        const row = document.createElement('tr');
        const dateCell = document.createElement('td');
        const pageViewsCell = document.createElement('td');

        dateCell.textContent = entry.date;
        pageViewsCell.textContent = entry.pageViews;

        row.appendChild(dateCell);
        row.appendChild(pageViewsCell);
        tableBody.appendChild(row);
      });
    })
    .catch(error => {
      console.error('Error fetching analytics data:', error);
    });
</script>

</body>
</html>
